# STRATA CONFIGURATION (Whitelabel Source of Truth)
# Version: 2.1
# Prilagođeno za: TEJL d.o.o.

GLOBAL:
  company_name: "TEJL d.o.o."
  currency_symbol: "€"
  locale: "hr_HR"

# ------------------------------------------------------------------
# CLOUDS (Strukturirani podaci / SQL Tablice)
# ------------------------------------------------------------------
# Ovdje definiramo entitete koji su zajednički za cijelu firmu.
# Kada sustav naiđe na klijenta u projektu, sprema ga u ovu tablicu.

CLOUDS:
  - name: "Klijent"      # Ime tablice u bazi
    icon: "briefcase"    # Ikona za dashboard
    fields:
      - key: "naziv"
        type: "string"
        required: true
      - key: "email"
        type: "email"
        required: false
      - key: "oib"
        type: "string"
        required: false
      - key: "status"
        type: "select"
        options: ["Aktivan", "Potencijalni", "Bivši"]
        required: true

  - name: "Operater"     # Zaposlenici / Suradnici
    icon: "user"
    fields:
      - key: "ime"
        type: "string"
        required: true
      - key: "uloga"
        type: "string" # Npr. "Inženjer", "Dizajner"
        required: false
      - key: "satnica"
        type: "number"
        required: false

# ------------------------------------------------------------------
# ISLANDS (Projekti / Radni folderi)
# ------------------------------------------------------------------
# Definira gdje sustav traži projekte i kako zbraja podatke.

ISLANDS:
  - name: "Projekt"
    root_path: "./DEV/*"
    meta_file: "meta.yaml"
    
    # Implicitne Relacije: Koja polja u meta.yaml se vežu na Clouds?
    relations:
      - field: "klijent"
        target_cloud: "Klijent"
      - field: "operater"
        target_cloud: "Operater"

    # Dubinsko Skeniranje (Agregacije)
    # Sustav zbraja podatke iz pod-foldera
    aggregations:
      # Zbrajanje izlaznih računa
      - name: "ukupni_prihod"
        path: "INTERNO/Financije/Racuni/*.yaml"
        target_field: "iznos"
        logic: "sum" 
        filter: "status == 'placeno'" 

      # Zbrajanje radnih naloga (sati)
      - name: "ukupno_sati"
        path: "INTERNO/RadniNalozi/*.yaml"
        target_field: "sati"
        logic: "sum"

